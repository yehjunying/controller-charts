<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="css/onos/opensans.css">
    <link rel="stylesheet" href="css/onos/onos.css">
    <link rel="stylesheet" href="css/onos/onos-theme.css">
    <link rel="stylesheet" href="css/onos/common.css">
</head>

<body ng-app="myApp" ng-cloak>

    <div ng-controller="appCtrl">
        <a href="#red">Red</a>
        <div ng-view></div>
    </div>

    <!-- Angular Material requires Angular.js Libraries -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-route.min.js"></script>
    <script src="./node_modules/oclazyload/dist/ocLazyLoad.min.js"></script>
    <!--<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-messages.min.js"></script>-->

    <!-- Angular Material Library -->
    <!--<script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>-->

    <script src="./node_modules/lodash/lodash.min.js"></script>
    <!--<script src="./node_modules/jquery/dist/jquery.min.js"></script>-->

    <script src="app/services/mock/websocket.js"></script>

    <!-- Your application bootstrap  -->
    <script type="text/javascript">

        angular.module("myApp", ['ngRoute', 'oc.lazyLoad', 'mockUtils'])
            .config(function ($routeProvider) {
                $routeProvider
                    .when("/red", {
                        templateUrl: "app/view/configHistoryDetail/configHistoryDetail.html",
                        controller: 'OvConfigHistoryDetailCtrl',
                        resolve: {
                            ctrl: ['$ocLazyLoad', function ($ocLazyLoad) {
                                return $ocLazyLoad.load([
                                    {
                                        files:[
                                            'app/view/configHistoryDetail/ang-accordion.js',
                                            './node_modules/moment/min/moment.min.js',
                                            'app/view/configHistoryDetail/configHistoryDetail.js'],
                                        serie: true
                                    },
                                    {
                                        files: [
                                            './node_modules/bootstrap/dist/css/bootstrap.min.css',
                                            'app/view/configHistoryDetail/configHistoryDetail.css'
                                        ],
                                        serie: true
                                    },
                                    {
                                        files: ['app/view/configHistoryDetail/ang-accordion.css']
                                    }
                                ]);
                            }]
                        }
                    });
            })
            .controller('appCtrl', ['$scope', function ($scope) {

            }])
            .run(['$location', '$http', 'WebSocketService', function ($location, $http, wss) {
                $http.get('event-resp/configHistoryDetailDataResponse.json').then(function(res){
                    wss.bindResponseData({
                        configHistoryDetailDataResponse: res.data
                    });
                    $location.path('/red')
                        .search('from', 'somewhere')
                        .search('id', '20170501011000000')
                        .search('other', '20170501011009999');
                }, function (err) {
                    console.log(err);
                });
            }]);
    </script>

</body>

</html>